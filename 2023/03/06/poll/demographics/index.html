
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDH Spring 2023 Poll</title>
    <link rel="stylesheet" href="https://use.typekit.net/mxr8glf.css">
    <link rel="stylesheet" href="assets/styles.css">
  </head>
  <body>
    <div class="tool">
    <nav id="navbar">
        <div id="navbar-logo">
            <a href="https://www.browndailyherald.com">
                <img id="navbar-logo-img" src="/images/logo-black.png"/>
            </a>
        </div>
        <ul id="nav-options"><li
                    
                        class="nav-option"
                    
                >
                    <a href="../lifestyle">Lifestyle</a>
                </li><li
                    
                        class="nav-option"
                    
                >
                    <a href="../policy">Policy</a>
                </li><li
                    
                        class="nav-option"
                    
                >
                    <a href="../approval">Approval Ratings</a>
                </li><li
                    
                        class="nav-option active"
                    
                >
                    <a href="../demographics">Demographics</a>
                </li></ul>
        <div id="nav-links">
            <a id="about-link" href="../about">About</a>
            <a id="story-link" href="https://www.browndailyherald.com/article/2023/03/the-heralds-spring-2023-poll">
                <div>Read the story</div>
                <img src="../assets/white-arrow.svg" />
            </a>
        </div>
    </nav>
    <section class="section-wrapper"> 
        <div class="question-categories-wrapper">
            <div class="question-categories">
                
                    <button data-target="class-year" id='class-year'>Class Year</button>
                
                    <button data-target="gender-identity" id='gender-identity'>Gender Identity</button>
                
                    <button data-target="race-ethnicity" id='race-ethnicity'>Race/Ethnicity</button>
                
                    <button data-target="sexual-orientation" id='sexual-orientation'>Sexual Orientation</button>
                
                    <button data-target="financial-aid" id='financial-aid'>Financial Aid</button>
                
                    <button data-target="varsity" id='varsity'>Varsity Athlete</button>
                
                    <button data-target="legacy" id='legacy'>Legacy</button>
                
                    <button data-target="first-gen" id='first-gen'>First-Generation Students</button>
                
                    <button data-target="zodiac" id='zodiac'>Zodiac Sign</button>
                
            </div>
        </div>
        <div class="main-content-wrapper">
            <div class="question-text">
                
                    <div class="question-class-year-text" style="display: none;">
                        <h1>What is your class year?</h1>
                    </div>
                
                    <div class="question-gender-identity-text" style="display: none;">
                        <h1>How would you describe your gender identity? Check all that apply.</h1>
                    </div>
                
                    <div class="question-race-ethnicity-text" style="display: none;">
                        <h1>How would you describe your race/ethnicity? Check all that apply.</h1>
                    </div>
                
                    <div class="question-sexual-orientation-text" style="display: none;">
                        <h1>How would you describe your sexual orientation?</h1>
                    </div>
                
                    <div class="question-financial-aid-text" style="display: none;">
                        <h1>What type of financial aid do you receive from Brown?</h1>
                    </div>
                
                    <div class="question-varsity-text" style="display: none;">
                        <h1>Are you a varsity athlete?</h1>
                    </div>
                
                    <div class="question-legacy-text" style="display: none;">
                        <h1>Do you have a parent, grandparent or sibling who attended Brown?</h1>
                    </div>
                
                    <div class="question-first-gen-text" style="display: none;">
                        <h1>Do you identify as a first-generation college student?</h1>
                    </div>
                
                    <div class="question-zodiac-text" style="display: none;">
                        <h1>What is your zodiac sign?</h1>
                    </div>
                
            </div>
            <div class="subdiv-graph-wrapper">
                <div class="question-subdivisions">
                    
                        <div class="question-class-year-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                        </div>
                    
                        <div class="question-gender-identity-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                        </div>
                    
                        <div class="question-race-ethnicity-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                        </div>
                    
                        <div class="question-sexual-orientation-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                        </div>
                    
                        <div class="question-financial-aid-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                                <button id="by_varsity">Varsity</button>
                            
                                <button id="by_legacy">Legacy</button>
                            
                        </div>
                    
                        <div class="question-varsity-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                        </div>
                    
                        <div class="question-legacy-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                                <button id="by_race">Race/Ethnicity</button>
                            
                        </div>
                    
                        <div class="question-first-gen-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                                <button id="by_first-gen">First-Generation</button>
                            
                        </div>
                    
                        <div class="question-zodiac-subdivisions" style="display: none;">
                            <h2 id="breakdown-header">Broken down by</h2>
                            
                                <button id="total">Total</button>
                            
                        </div>
                    
                </div>

                <div class="graphics">
                    
                        
                            <div class="image-class-year-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/5b63z/5/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-gender-identity-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/r9XFy/7/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-race-ethnicity-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/9HJkk/4/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-sexual-orientation-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/H9tJ1/6/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-financial-aid-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/XSh4C/6/></iframe>
                            </div>
                        
                            <div class="image-financial-aid-by_varsity" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/pC0H5/6/></iframe>
                            </div>
                        
                            <div class="image-financial-aid-by_legacy" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/8O0ZP/6/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-varsity-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/BbMmW/6/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-legacy-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/478lz/5/></iframe>
                            </div>
                        
                            <div class="image-legacy-by_race" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/N2NFZ/3/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-first-gen-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/DWzKm/5/></iframe>
                            </div>
                        
                            <div class="image-first-gen-by_first-gen" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/4xD6X/5/></iframe>
                            </div>
                        
                    
                        
                            <div class="image-zodiac-total" style="display: none;">
                                <iframe src=https://datawrapper.dwcdn.net/nkfgJ/7/></iframe>
                            </div>
                        
                    
                </div>
            </div>
        </div>
    </section>
</div>
<script>
    const buttons = document.querySelectorAll('.question-categories button');
    let subButtons = document.querySelectorAll('.question-subdivisions button');
    const textSections = document.querySelectorAll('.question-text div');
    const subSections = document.querySelectorAll('.question-subdivisions div');
    const graphics = document.querySelectorAll('.graphics div')

    let selectedButton = buttons[0].id;
    let selectedSubButton = subButtons[0].id;

    window.onload = () => {
        const urlParams = new URLSearchParams(window.location.search);

        const questionParam = urlParams.get('question');
        const breakdownParam = urlParams.get('breakdown');

        console.log(window.location.href)

        console.log(questionParam)
        console.log(breakdownParam)

        if (questionParam && breakdownParam) {
            selectedButton = questionParam;
            selectedSubButton = breakdownParam;
        } else if (questionParam) {
            selectedButton = questionParam;
        } else {
            buttons[0].classList.add('selected');
            subButtons[0].classList.add('selected');
        }

        for (const button of buttons) {
            if (button.id === selectedButton) {
                button.classList.add('selected');
            }
        }

        for (const subButton of subButtons) {
            if (subButton.id === selectedSubButton) {
                subButton.classList.add('selected');
            }
        }

        for (const textSection of textSections) {
            if (textSection.classList.contains(`question-${selectedButton}-text`)) {
                textSection.style.display = 'block';
            }
        }

        for (const subSection of subSections) {
            if (subSection.classList.contains(`question-${selectedButton}-subdivisions`)) {
                subSection.style.display = 'block';
            }
        }

        for (const graphic of graphics) {
            if (graphic.classList.contains(`image-${selectedButton}-${selectedSubButton}`)) {
                graphic.style.display = 'block';
            }
        }

        addButtonsListener();
        addSubButtonsListener();
    };


    addButtonsListener = () => {
        buttons.forEach((button) => {
            button.addEventListener('click', () => {
                handleButtonClick(button)
            });
        });
    }

    addSubButtonsListener = () => {
            subButtons.forEach((button) => {
                button.addEventListener('click', () => {
                    handleSubButtonClick(button);
                });
            });
    }

    handleButtonClick = (button) => {
        selectedButton = button.id;
        buttons.forEach((b) => b.classList.remove('selected'));
        textSections.forEach((section) => section.style.display = 'none');
        subSections.forEach((section) => section.style.display = 'none');
        button.classList.add('selected');
        const target = button.dataset.target;
        document.querySelector(`.question-${target}-text`).style.display = 'block';
        document.querySelector(`.question-${target}-subdivisions`).style.display = 'block';
        subButtons = document.querySelectorAll(`.question-${target}-subdivisions button`);
        subButtons.forEach((b) => b.classList.remove('selected'));
        subButtons[0].classList.add('selected');
        selectedSubButton = subButtons[0].id;
        updateImage()
    }

    handleSubButtonClick = (button) => {
        selectedSubButton = button.id;
        subButtons.forEach((b) => b.classList.remove('selected'));
        button.classList.add('selected');
        updateImage()
    }

    updateImage = () => {
        graphics.forEach((image) => image.style.display = 'none');
        document.querySelector(`.image-${selectedButton}-${selectedSubButton}`).style.display = 'block';
    }
</script>

<script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(e){if(void 0!==e.data["datawrapper-height"]){var t=document.querySelectorAll("iframe");for(var a in e.data["datawrapper-height"])for(var r=0;r<t.length;r++){if(t[r].contentWindow===e.source)t[r].style.height=e.data["datawrapper-height"][a]+"px"}}}))}();</script>
  </body>
</html>